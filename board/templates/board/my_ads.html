{% block content %}
  <div class="container mt-4">
    <h2 class="mb-4">–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h2>

    <form method="get" class="form-inline mb-3">
      <label for="category" class="mr-2">–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
      <select name="category" id="category" class="form-control mr-2">
        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
        {% for code, name in categories %}
          <option value="{{ code }}" {% if selected_category == code %}selected{% endif %}>
            {{ name }}
          </option>
        {% endfor %}
      </select>
      <button type="submit" class="btn btn-primary">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
    </form>

    {% if ads %}
      {% for ad in ads %}
        <div class="card mb-3">
          <div class="card-body">
            <h4><a href="{% url 'ads:ad_detail' ad.pk %}">{{ ad.title }}</a></h4>
            <p>{{ ad.text|truncatechars:100 }}</p>
            <p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ ad.get_category_display }}</p>
            <div>
              <a href="{% url 'ads:edit_ad' ad.pk %}" class="btn btn-sm btn-outline-secondary">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
              <a href="{% url 'ads:delete_ad' ad.pk %}" class="btn btn-sm btn-outline-danger">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
            </div>
          </div>
        </div>
      {% endfor %}

      <nav class="pagination">
        <ul class="pagination">
          {% if ads.has_previous %}
            <li class="page-item">
              <a class="page-link" href="?{% if selected_category %}category={{ selected_category }}&{% endif %}page={{ ads.previous_page_number }}">¬´ –ù–∞–∑–∞–¥</a>
            </li>
          {% endif %}

          <li class="page-item disabled">
            <span class="page-link">–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ ads.number }} –∏–∑ {{ ads.paginator.num_pages }}</span>
          </li>

          {% if ads.has_next %}
            <li class="page-item">
              <a class="page-link" href="?{% if selected_category %}category={{ selected_category }}&{% endif %}page={{ ads.next_page_number }}">–í–ø–µ—Ä—ë–¥ ¬ª</a>
            </li>
          {% endif %}
        </ul>
      </nav>
    {% else %}
      <p>–í—ã –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π.</p>
    {% endif %}

    <hr>
    <a href="{% url 'ads:list' %}" class="btn btn-outline-primary">üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
  </div>
{% endblock %}
